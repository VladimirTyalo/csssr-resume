{"version":3,"sources":["webpack:///./app/scripts/app.js?e48d","webpack:///./app/blocks/slider/slider.js?3294"],"names":["initialText","$about","$slider","slider","init","Slider","$el","element","$field","find","$knob","$marks","TRANSFORM_SCALE_UP","TRANSFORM_SCALE_NORMAL","isMouseDown","percentages","map","idx","m","Number","getAttribute","toArray","value","getLeftAttr","position","mark","width","offsetWidth","left","onMarkClick","css","indexOf","createScale","fragment","document","createDocumentFragment","each","el","createElement","style","top","length","innerText","color","appendChild","getLeftPosition","ev","fieldWidth","halfKnob","rect","getBoundingClientRect","clientX","coord","findNearestMarkPosition","coordInPercentages","reduce","acc","delta","Math","abs","Infinity","onMouseUp","event","removeEventListener","onMouseMove","transform","nearest","preventDefault","addEventListener","onMouseDown","target","on","getValue"],"mappings":"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","file":"0.021a0c3498422bc21eb4.hot-update.js","sourcesContent":["import svg4everybody from 'svg4everybody';\nimport $ from 'jquery';\n\nimport makeExpandingArea from '../blocks/expanding-area/expanding-area.js';\nimport Slider from '../blocks/slider/slider.js';\n\n\n\nconst initialText = 'Здравствуйте! Узнал о Вашей компании недавно, но уже успел прочитать почти весь Ваш блог. Очень понравилась идея работать удаленно не в одиночку, а в команде профессионалов. Чеснто говоря, решил, что хочу начать карьеру у Вас в компании после того как попробовал Ваш шаблон для быстрого старта. Удобно, понятно и очень модульно.';\n\n\n$(() => {\n\tsvg4everybody();\n\n\t// init textarea rows adjustment\n\tconst $about = $('.expanding-area');\n\tmakeExpandingArea($about[0], initialText);\n\n\t// init slider\n\tconst $slider = $('#slider');\n\tconst slider = new Slider($slider);\n\tslider.init();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/app.js","import $ from 'jquery';\n\nconst Slider = element => {\n\tconst $el = $(element);\n\tconst $field = $el.find('[data-slider=\"slider-field\"]');\n\tconst $knob = $el.find('[data-slider=\"slider-knob\"]');\n\tconst $marks = $el.find('[data-slider=\"slider-mark\"]');\n\tconst TRANSFORM_SCALE_UP = 1.4;\n\tconst TRANSFORM_SCALE_NORMAL = 1.0;\n\tlet isMouseDown = false;\n\n\t// get array of % scale\n\tconst percentages = $marks.map((idx, m) => Number(m.getAttribute('data-value'))).toArray();\n\n\t// value - corresponding index of percentages array this value returned by public API\n\tlet value = 1;\n\n\t// get knob's css left attribute\n\tconst getLeftAttr = mark => {\n\t\tconst position = Number(mark.getAttribute('data-value'));\n\t\tconst width = Number($field[0].offsetWidth);\n\t\tlet left = null;\n\t\tif (position === 0) {\n\t\t\tleft = -$knob[0].offsetWidth * 0.5;\n\t\t} else if (position === 100) {\n\t\t\tleft = width * (position / 100) - $knob[0].offsetWidth * 0.6;\n\t\t} else {\n\t\t\tleft = width * (position / 100) - $knob[0].offsetWidth / 2;\n\t\t}\n\n\t\treturn left;\n\t};\n\n\n\t// click on item should move knob to mark position\n\tconst onMarkClick = mark => {\n\t\t$knob.css('transition', '0.3s');\n\t\t$knob.css('left', getLeftAttr(mark) + 'px');\n\n\t\tvalue = percentages.indexOf(Number(mark.getAttribute('data-value')));\n\t};\n\n\t// render scale marks on the field\n\tconst createScale = () => {\n\t\tconst fragment = document.createDocumentFragment();\n\n\t\t$marks.each((idx, el) => {\n\t\t\t// create mark and set styles\n\t\t\tconst mark = document.createElement('div');\n\t\t\tmark.style.position = 'absolute';\n\t\t\tmark.style.left = getLeftAttr(el) + $knob[0].offsetWidth / 2 + 'px';\n\t\t\tmark.style.top = '-5px';\n\t\t\t// don't set 0 and 100% present scale\n\t\t\tif (idx !== 0 && idx !== $marks.length - 1) {\n\t\t\t\tmark.innerText = '|';\n\t\t\t}\n\t\t\t// append makr element to a document fragment\n\t\t\tmark.style.color = '#2f1b15';\n\t\t\tfragment.appendChild(mark);\n\t\t});\n\n\t\t$field[0].appendChild(fragment);\n\t};\n\n\t// culculate new left position\n\tfunction getLeftPosition(ev) {\n\t\tconst fieldWidth = $field[0].offsetWidth;\n\t\tconst halfKnob = $knob[0].offsetWidth / 2;\n\n\t\t// find left style parameter  for knob\n\t\tconst rect = $field[0].getBoundingClientRect();\n\n\t\t// x coordinate of left edge of the knob relative to the field\n\t\tconst left = ev.clientX - rect.left;\n\n\t\t// limit x movement and adjust to the knob width\n\t\tlet coord;\n\t\tif (left + halfKnob < 0) {\n\t\t\tcoord = -halfKnob;\n\t\t} else if (left + 2 * halfKnob > fieldWidth) {\n\t\t\tcoord = fieldWidth - 2 * halfKnob;\n\t\t} else {\n\t\t\tcoord = left - halfKnob;\n\t\t}\n\n\t\treturn coord;\n\t}\n\n\tfunction findNearestMarkPosition(ev) {\n\t\tconst coordInPercentages = getLeftPosition(ev) * 100 / $field[0].offsetWidth;\n\t\tconst mark = percentages.reduce((acc, el) => {\n\t\t\tconst delta = Math.abs(coordInPercentages - el);\n\t\t\tif (acc[1] > Math.abs(delta)) {\n\t\t\t\treturn [el, delta];\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, [0, Infinity]);\n\n\t\treturn mark[0];\n\t}\n\n\n\tfunction onMouseUp(event) {\n\t\tif (!isMouseDown) {\n\t\t\treturn;\n\t\t}\n\t\tisMouseDown = false;\n\t\t// remove listeners\n\t\tdocument.removeEventListener('mousemove', onMouseMove);\n\t\t$knob[0].style.transform = `scale(${TRANSFORM_SCALE_NORMAL})`;\n\t\tdocument.removeEventListener('mouseup', onMouseUp);\n\n\t\t// set transition to knob\n\t\t$knob.css('transition', '0.4s');\n\t\t// move knob to the nearest mark\n\t\tconst nearest = findNearestMarkPosition(event);\n\n\t\tvalue = percentages.indexOf(nearest);\n\t}\n\n\tfunction onMouseMove(ev) {\n\t\tev.preventDefault();\n\t\tif (!isMouseDown) {\n\t\t\treturn;\n\t\t}\n\t\tconst coord = getLeftPosition(ev);\n\n\t\t// remove transition property when move\n\t\t$knob.css('transition', 'none');\n\t\t// set knob position;\n\t\t$knob.css('left', coord);\n\t\t// listen to mouseup on the whole document\n\t\tdocument.addEventListener('mouseup', function (event) {\n\t\t\tif (!isMouseDown) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tisMouseDown = false;\n\t\t\t// remove listeners\n\t\t\tdocument.removeEventListener('mousemove', onMouseMove);\n\t\t\t$knob[0].style.transform = `scale(${TRANSFORM_SCALE_NORMAL})`;\n\t\t\tdocument.removeEventListener('mouseup', onMouseUp);\n\n\t\t\t// set transition to knob\n\t\t\t$knob.css('transition', '0.4s');\n\t\t\t// move knob to the nearest mark\n\t\t\tconst nearest = findNearestMarkPosition(event);\n\n\t\t\tvalue = percentages.indexOf(nearest);\n\t\t});\n\t}\n\n\n\tconst onMouseDown = ev => {\n\t\tconst target = ev.target;\n\t\tisMouseDown = true;\n\t\tif (target.getAttribute('data-slider') === 'slider-field') {\n\t\t\t// move knob to clicked position\n\t\t\tconst coord = getLeftPosition(ev);\n\t\t\t$knob.css('transition', '0.5s');\n\t\t\t$knob.css('left', coord);\n\t\t} else if (target.getAttribute('data-slider') !== 'slider-knob') {\n\t\t\treturn;\n\t\t} else {\n\t\t\t// scale triangle up a little\n\t\t\ttarget.style.transform = `scale(${TRANSFORM_SCALE_UP})`;\n\t\t\tdocument.addEventListener('mousemove', onMouseMove);\n\t\t}\n\t};\n\n\n\tconst init = () => {\n\t\t// set initial value\n\t\tconst coord = percentages[value] * $field[0].offsetWidth / 100 - $knob[0].offsetWidth / 2 + 'px';\n\t\t$knob.css('left', coord);\n\t\t// add onClick events for marks\n\t\t$el.on('click', ev => {\n\t\t\tconst target = ev.target;\n\t\t\tif (target.getAttribute('data-slider') !== 'slider-mark') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonMarkClick(target);\n\t\t});\n\n\t\t// add onMouseDown event list-group-item-danger\n\t\t$el.on('mousedown', onMouseDown);\n\t\tcreateScale();\n\t};\n\n\t// public function to find position of the knob (0 - n) where n is number of marks\n\tconst getValue = () => {\n\t\treturn value;\n\t};\n\n\treturn {\n\t\tgetValue,\n\t\tinit\n\t};\n};\n\nexport default Slider;\n\n\n\n// WEBPACK FOOTER //\n// ./app/blocks/slider/slider.js"],"sourceRoot":""}